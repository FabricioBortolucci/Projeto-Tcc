<!-- Created with Jaspersoft Studio version 7.0.1.final using JasperReports Library version 7.0.1-573496633c2b4074e32f433154b543003f7d2498  -->
<jasperReport name="relatorio_DRE" language="java" columnCount="1" pageWidth="595" pageHeight="842" orientation="Landscape" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="dc333486-5706-443c-8ae6-9a65a9206996">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="Produto"/>
	<property name="com.jaspersoft.studio.unit." value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageHeight" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.topMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.bottomMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.leftMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.rightMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnSpacing" value="pixel"/>
	<parameter name="condicao" class="java.lang.String">
		<defaultValueExpression><![CDATA[""]]></defaultValueExpression>
	</parameter>
	<parameter name="dataInicio" class="java.time.LocalDateTime"/>
	<parameter name="dataFim" class="java.time.LocalDateTime"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String"/>
	<parameter name="dataInicioFormat" class="java.lang.String"/>
	<parameter name="dataFimFormat" class="java.lang.String"/>
	<query language="SQL"><![CDATA[select os.os_id,
       os.os_data_abertura,
       os.os_data_fechamento,
       os.os_data_cancelamento,
       os.os_status,
       cli.pes_nome as cli_nome,
       func.pes_nome as func_nome,
       cli.pes_id as cli_id,
       os.os_valor_total
from ordem_servico os
         left join pessoa cli on os.os_cliente_id = cli.pes_id
         left join pessoa func on os.funcionario_id = func.pes_id
where os.os_data_abertura between $P{dataInicio}  and  $P{dataFim}
 $P!{condicao} 
group by os.os_id, cli.pes_id, func.pes_id, os.os_data_abertura
order by os.os_id DESC]]></query>
	<field name="os_id" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.name" value="os_id"/>
		<property name="com.jaspersoft.studio.field.label" value="os_id"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="ordem_servico"/>
	</field>
	<field name="os_data_abertura" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.name" value="os_data_abertura"/>
		<property name="com.jaspersoft.studio.field.label" value="os_data_abertura"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="ordem_servico"/>
	</field>
	<field name="os_data_fechamento" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.name" value="os_data_fechamento"/>
		<property name="com.jaspersoft.studio.field.label" value="os_data_fechamento"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="ordem_servico"/>
	</field>
	<field name="os_data_cancelamento" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.name" value="os_data_cancelamento"/>
		<property name="com.jaspersoft.studio.field.label" value="os_data_cancelamento"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="ordem_servico"/>
	</field>
	<field name="os_status" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="os_status"/>
		<property name="com.jaspersoft.studio.field.label" value="os_status"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="ordem_servico"/>
	</field>
	<field name="cli_nome" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="cli_nome"/>
		<property name="com.jaspersoft.studio.field.label" value="cli_nome"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="pessoa"/>
	</field>
	<field name="func_nome" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="func_nome"/>
		<property name="com.jaspersoft.studio.field.label" value="func_nome"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="pessoa"/>
	</field>
	<field name="cli_id" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.name" value="cli_id"/>
		<property name="com.jaspersoft.studio.field.label" value="cli_id"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="pessoa"/>
	</field>
	<field name="os_valor_total" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="os_valor_total"/>
		<property name="com.jaspersoft.studio.field.label" value="os_valor_total"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="ordem_servico"/>
	</field>
	<variable name="valorTotalGeral" calculation="Sum" class="java.math.BigDecimal">
		<expression><![CDATA[$F{os_valor_total}]]></expression>
	</variable>
	<group name="cliente_group" keepTogether="true" preventOrphanFooter="true">
		<expression><![CDATA[$F{cli_id}]]></expression>
		<groupHeader>
			<band height="36">
				<element kind="rectangle" uuid="ae4f96d2-24fa-4291-b4dd-b115d67faae4" x="8" y="9" width="222" height="19" forecolor="rgba(0, 0, 0, 0.0)" backcolor="#DEDEDE" radius="6"/>
				<element kind="textField" uuid="9b3be079-d8cd-4fdd-bce5-e585e010fcbd" x="14" y="8" width="214" height="18" fontSize="14.0" bold="true" hTextAlign="Left" vTextAlign="Middle">
					<expression><![CDATA[$F{cli_nome}]]></expression>
					<box>
						<topPen lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineStyle="Solid" lineColor="#000000"/>
					</box>
				</element>
				<element kind="line" uuid="a4a1a047-2d2e-4790-9f32-5bded8384d9d" x="230" y="17" width="325" height="1" forecolor="rgba(99, 99, 99, 0.18431373)"/>
			</band>
		</groupHeader>
	</group>
	<title height="72">
		<element kind="frame" uuid="983e13e0-383d-4a74-b8e8-bfa675850230" mode="Opaque" x="-20" y="-20" width="595" height="92" backcolor="#006699">
			<element kind="staticText" uuid="c36b1792-166a-444d-acc7-490de1071092" x="20" y="20" width="210" height="20" forecolor="#FFFFFF" backcolor="#FFFFFF" fontSize="14.0" bold="true">
				<text><![CDATA[Relatório de Ordem de Serviço]]></text>
			</element>
			<element kind="staticText" uuid="efb2e48a-ce82-4a21-b4f6-f10e68ad2374" x="464" y="10" width="120" height="20" forecolor="#FFFFFF" fontSize="14.0" bold="false" hTextAlign="Right">
				<text><![CDATA[Oficina - Bortolucci]]></text>
			</element>
			<element kind="textField" uuid="26341dfa-1446-4da6-8887-f4e6f1162b81" x="9" y="70" width="221" height="16" forecolor="#FFFFFF" bold="true">
				<expression><![CDATA["De " + $P{dataInicioFormat} + " Até " + $P{dataFimFormat}]]></expression>
			</element>
		</element>
	</title>
	<pageHeader/>
	<detail>
		<band height="264">
			<element kind="rectangle" uuid="77b88e05-4d0c-4f06-8ccf-6907842107ca" x="0" y="0" width="554" height="255" radius="4">
				<pen lineColor="rgba(0, 0, 0, 0.078431375)"/>
			</element>
			<element kind="subreport" uuid="e506e787-c360-4bd0-a57b-5267fd8e2e5d" x="0" y="94" width="554" height="56" printWhenDetailOverflows="true">
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<expression><![CDATA[$P{SUBREPORT_DIR} + "prod_subreport.jasper"

]]></expression>
				<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
				<parameter name="osID">
					<expression><![CDATA[$F{os_id}]]></expression>
				</parameter>
				<parameter name="dataInicio">
					<expression><![CDATA[$P{dataInicio}]]></expression>
				</parameter>
				<parameter name="dataFim">
					<expression><![CDATA[$P{dataFim}]]></expression>
				</parameter>
			</element>
			<element kind="subreport" uuid="e224d1b6-8aab-4367-bf8d-3230e197b777" x="0" y="170" width="555" height="62" printWhenDetailOverflows="true">
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<expression><![CDATA[$P{SUBREPORT_DIR} + "serv_subreport.jasper"]]></expression>
				<parameter name="osID">
					<expression><![CDATA[$F{os_id}]]></expression>
				</parameter>
				<parameter name="dataInicio">
					<expression><![CDATA[$P{dataInicio}]]></expression>
				</parameter>
				<parameter name="dataFim">
					<expression><![CDATA[$P{dataFim}]]></expression>
				</parameter>
			</element>
			<element kind="staticText" uuid="5e9218be-1f32-4803-989a-6a1ddc0aec6f" x="5" y="12" width="50" height="18" fontSize="14.0" bold="true" hTextAlign="Center" vTextAlign="Middle">
				<text><![CDATA[O.S ID:]]></text>
			</element>
			<element kind="staticText" uuid="9f61d602-ee99-46fe-9269-8f96eb53c981" x="260" y="46" width="84" height="16" bold="true" hTextAlign="Center" vTextAlign="Middle">
				<text><![CDATA[Data Abertura]]></text>
			</element>
			<element kind="staticText" uuid="84517aac-444c-4270-b6f4-40cf6db5808f" x="344" y="46" width="100" height="16" bold="true" hTextAlign="Center" vTextAlign="Middle">
				<text><![CDATA[Data Fechamento]]></text>
			</element>
			<element kind="staticText" uuid="cfa65fbb-ceeb-4332-85ce-37c44a059b03" x="190" y="46" width="70" height="16" bold="true" hTextAlign="Center" vTextAlign="Middle">
				<text><![CDATA[Status]]></text>
			</element>
			<element kind="textField" uuid="3a969a99-7667-437c-b0dd-2a65b3e3c758" x="0" y="62" width="190" height="16" bold="true" hTextAlign="Center" vTextAlign="Middle">
				<expression><![CDATA[ $F{func_nome}]]></expression>
				<box>
					<topPen lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineStyle="Solid" lineColor="#000000"/>
				</box>
			</element>
			<element kind="textField" uuid="b3aed5f2-a8df-4c0f-b06d-5be2c407ab79" x="55" y="12" width="70" height="18" fontSize="14.0" bold="true" hTextAlign="Center" vTextAlign="Middle">
				<expression><![CDATA[$F{os_id}]]></expression>
				<box>
					<topPen lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineStyle="Solid" lineColor="#000000"/>
				</box>
			</element>
			<element kind="textField" uuid="875e23bb-3d4f-4fcd-bcec-a4ac069719be" x="260" y="62" width="84" height="16" pattern="dd/MM/yyyy" bold="true" hTextAlign="Center" vTextAlign="Middle">
				<expression><![CDATA[$F{os_data_abertura}]]></expression>
				<box>
					<topPen lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineStyle="Solid" lineColor="#000000"/>
				</box>
			</element>
			<element kind="textField" uuid="3db46938-fae4-4810-b072-2f7782bc5551" x="344" y="62" width="100" height="16" pattern="dd/MM/yyyy" bold="true" hTextAlign="Center" vTextAlign="Middle">
				<expression><![CDATA[$F{os_data_fechamento} != null ? $F{os_data_fechamento} : "N/A"]]></expression>
				<box>
					<topPen lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineStyle="Solid" lineColor="#000000"/>
				</box>
			</element>
			<element kind="textField" uuid="89cfe04b-ed76-4cca-a055-79782ac358e3" x="190" y="62" width="70" height="16" bold="true" hTextAlign="Center" vTextAlign="Middle">
				<expression><![CDATA[$F{os_status}.equals("FINALIZADA") ? "Finalizada" : $F{os_status}.equals("ABERTA") ? "Aberta" : 
$F{os_status}.equals("EM_EXECUCAO") ? "Em execução" : $F{os_status}.equals("CANCELADA") ? "Cancelada" : "N/A"]]></expression>
				<box>
					<topPen lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineStyle="Solid" lineColor="#000000"/>
				</box>
			</element>
			<element kind="staticText" uuid="e876dbf7-eccb-4ae3-b6e5-5d0157032105" x="444" y="46" width="110" height="16" bold="true" hTextAlign="Center" vTextAlign="Middle">
				<text><![CDATA[Data Cancelamento]]></text>
			</element>
			<element kind="textField" uuid="441d3f8f-a7cd-4cb6-b305-29b86975c75f" x="444" y="62" width="110" height="16" pattern="dd/MM/yyyy" bold="true" hTextAlign="Center" vTextAlign="Middle">
				<expression><![CDATA[$F{os_data_cancelamento} != null ?  $F{os_data_cancelamento} : "N/A"]]></expression>
				<box>
					<topPen lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineStyle="Solid" lineColor="#000000"/>
				</box>
			</element>
			<element kind="line" uuid="557d2a7b-72f0-49b1-bdd3-464420eb3369" x="0" y="62" width="555" height="1" forecolor="rgba(99, 99, 99, 0.18431373)"/>
			<element kind="line" uuid="03761153-bf61-475d-85b2-2d555698565e" x="5" y="30" width="119" height="1">
				<pen lineStyle="Dashed"/>
			</element>
			<element kind="staticText" uuid="bfffae3b-23a2-451e-8383-633a2a490a64" x="0" y="46" width="190" height="16" bold="true" hTextAlign="Center" vTextAlign="Middle">
				<text><![CDATA[Funcionário]]></text>
			</element>
			<element kind="staticText" uuid="b3161771-7119-4c96-87ed-df6d7d03f0d1" x="1" y="240" width="80" height="16" bold="true" hTextAlign="Center" vTextAlign="Middle">
				<text><![CDATA[Valor Total O.S:]]></text>
			</element>
			<element kind="textField" uuid="89facad3-7adb-4b5a-a20d-71690d43f48c" x="80" y="240" width="90" height="16" pattern="R$ #,##0.00;R$ -#,##0.00" bold="true" hTextAlign="Center" vTextAlign="Middle">
				<expression><![CDATA[$F{os_valor_total}]]></expression>
				<box>
					<topPen lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineStyle="Solid" lineColor="#000000"/>
				</box>
			</element>
		</band>
	</detail>
	<columnFooter/>
	<pageFooter height="20">
		<element kind="line" uuid="d9bdbe90-4ca4-49b6-ae9f-406da94859c5" x="1" y="0" width="554" height="1">
			<pen lineStyle="Dashed"/>
		</element>
		<element kind="textField" uuid="5b1f9286-121a-463d-96f0-f6616002d91e" x="0" y="0" width="200" height="20" evaluationTime="Report" vTextAlign="Bottom">
			<expression><![CDATA["Gerado em: " + new java.text.SimpleDateFormat("dd/MM/yyyy HH:mm").format(new java.util.Date())]]></expression>
		</element>
		<element kind="textField" uuid="11c14bb3-97d9-4a95-843b-d3d73be4ad12" x="455" y="0" width="100" height="20" hTextAlign="Right" vTextAlign="Bottom">
			<expression><![CDATA["Página " + $V{PAGE_NUMBER}]]></expression>
		</element>
	</pageFooter>
</jasperReport>
