<!-- Created with Jaspersoft Studio version 7.0.1.final using JasperReports Library version 7.0.1-573496633c2b4074e32f433154b543003f7d2498  -->
<jasperReport name="relatorio_DRE" language="java" columnCount="1" pageWidth="595" pageHeight="842" orientation="Landscape" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="dc333486-5706-443c-8ae6-9a65a9206996">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="Produto"/>
	<property name="com.jaspersoft.studio.unit." value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageHeight" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.topMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.bottomMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.leftMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.rightMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnSpacing" value="pixel"/>
	<parameter name="NOME_EMPRESA" class="java.lang.String"/>
	<parameter name="PERIODO" class="java.lang.String"/>
	<parameter name="TOTAL_RECEITAS" class="java.math.BigDecimal"/>
	<parameter name="TOTAL_CUSTOS" class="java.math.BigDecimal"/>
	<parameter name="TOTAL_DESPESAS" class="java.math.BigDecimal"/>
	<parameter name="LUCRO_BRUTO" class="java.math.BigDecimal"/>
	<parameter name="LUCRO_LIQUIDO" class="java.math.BigDecimal"/>
	<parameter name="dataInicio" class="java.time.LocalDate"/>
	<parameter name="dataFim" class="java.time.LocalDate"/>
	<parameter name="dataInicioFormat" class="java.lang.String"/>
	<parameter name="dataFimFormat" class="java.lang.String"/>
	<query language="SQL"><![CDATA[select p.codigo,
       p.descricao,
       p.natureza_conta,
       sum(l.lan_valor)
from lancamento_financeiro l
         inner join plano_de_contas p on l.plano_contas_id = p.id
where l.lan_data_comp between  '$P!{dataInicio} ' and  '$P!{dataFim}' 
and (p.natureza_conta = 'RECEITA' or p.natureza_conta = 'CUSTO' or p.natureza_conta = 'DESPESA')
group by l.plano_contas_id, p.codigo, p.descricao, p.natureza_conta
order by p.codigo]]></query>
	<field name="codigo" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="codigo"/>
		<property name="com.jaspersoft.studio.field.label" value="codigo"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="plano_de_contas"/>
	</field>
	<field name="descricao" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="descricao"/>
		<property name="com.jaspersoft.studio.field.label" value="descricao"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="plano_de_contas"/>
	</field>
	<field name="natureza_conta" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="natureza_conta"/>
		<property name="com.jaspersoft.studio.field.label" value="natureza_conta"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="plano_de_contas"/>
	</field>
	<field name="sum" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="sum"/>
		<property name="com.jaspersoft.studio.field.label" value="sum"/>
	</field>
	<variable name="subtotal_grupo" resetType="Group" calculation="Sum" resetGroup="group_natureza" class="java.math.BigDecimal">
		<expression><![CDATA[$F{sum}]]></expression>
	</variable>
	<group name="group_natureza">
		<expression><![CDATA[$F{natureza_conta}]]></expression>
		<groupHeader>
			<band height="20">
				<element kind="textField" uuid="f667b145-25a4-494a-b3d7-7dab4296f6f8" x="0" y="0" width="555" height="20" vTextAlign="Middle">
					<expression><![CDATA[$F{natureza_conta}.toUpperCase()]]></expression>
					<box leftPadding="5"/>
				</element>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="35">
				<element kind="textField" uuid="9ad3db6c-dd04-4cb3-8773-9929eb267837" x="355" y="0" width="100" height="20" vTextAlign="Middle">
					<expression><![CDATA["Total " + $F{natureza_conta} + ":"]]></expression>
				</element>
				<element kind="textField" uuid="2977abf4-5cba-4bdb-bfa8-53ca1f684a5f" x="455" y="0" width="100" height="20" pattern="R$ #,##0.00" vTextAlign="Middle">
					<expression><![CDATA[$V{subtotal_grupo}]]></expression>
					<box rightPadding="5"/>
				</element>
				<element kind="line" uuid="8ba0353c-4174-43f4-9bf3-45c897fea5e6" x="0" y="0" width="555" height="1" forecolor="rgba(0, 0, 0, 0.19215687)">
					<pen lineStyle="Solid"/>
				</element>
			</band>
		</groupFooter>
	</group>
	<background/>
	<title height="72">
		<element kind="frame" uuid="983e13e0-383d-4a74-b8e8-bfa675850230" mode="Opaque" x="-20" y="-20" width="595" height="92" backcolor="#006699">
			<element kind="staticText" uuid="c36b1792-166a-444d-acc7-490de1071092" x="20" y="20" width="250" height="20" forecolor="#FFFFFF" backcolor="#FFFFFF" fontSize="14.0" bold="true">
				<text><![CDATA[Demonstrativo de Resultados (DRE)]]></text>
			</element>
			<element kind="staticText" uuid="efb2e48a-ce82-4a21-b4f6-f10e68ad2374" x="464" y="10" width="120" height="20" forecolor="#FFFFFF" fontSize="14.0" bold="false" hTextAlign="Right">
				<text><![CDATA[Oficina - Bortolucci]]></text>
			</element>
			<element kind="textField" uuid="ae2af60d-10b9-46f3-ae76-27bac0bb5dad" x="9" y="70" width="221" height="16" forecolor="#FFFFFF" bold="true">
				<expression><![CDATA["De " + $P{dataInicioFormat}+ " Até " + $P{dataFimFormat}]]></expression>
			</element>
		</element>
	</title>
	<pageHeader height="13"/>
	<columnHeader height="21">
		<element kind="line" uuid="a4a1a047-2d2e-4790-9f32-5bded8384d9d" x="-20" y="20" width="595" height="1" forecolor="#666666"/>
		<element kind="staticText" uuid="a8133038-1220-437c-a68f-e19ccae9e629" x="0" y="0" width="100" height="20" bold="true" hTextAlign="Center" vTextAlign="Middle">
			<text><![CDATA[Código]]></text>
		</element>
		<element kind="staticText" uuid="6c07fa8c-dbcc-4634-b9e4-9f0775939eb6" x="100" y="0" width="354" height="20" bold="true" hTextAlign="Center" vTextAlign="Middle">
			<text><![CDATA[Descrição da Conta]]></text>
		</element>
		<element kind="staticText" uuid="3b8b524f-8587-4fca-81fc-ddee4963d881" x="454" y="0" width="100" height="20" bold="true" hTextAlign="Center" vTextAlign="Middle">
			<text><![CDATA[Valor]]></text>
		</element>
	</columnHeader>
	<detail>
		<band height="20">
			<element kind="textField" uuid="65d99d3c-33c9-4bf1-9d0c-67120b3d7833" x="0" y="0" width="100" height="15" textAdjust="StretchHeight" hTextAlign="Center" vTextAlign="Middle">
				<expression><![CDATA[$F{codigo}]]></expression>
				<box leftPadding="5"/>
			</element>
			<element kind="textField" uuid="8f48e230-4254-443c-924a-25bf82b8fe03" x="100" y="0" width="355" height="15" textAdjust="StretchHeight" hTextAlign="Center" vTextAlign="Middle">
				<expression><![CDATA[$F{descricao}]]></expression>
				<box leftPadding="5"/>
			</element>
			<element kind="textField" uuid="8b2bd77a-14e5-49fb-84e8-94e906f28d32" x="455" y="0" width="100" height="15" textAdjust="StretchHeight" pattern="R$ #,##0.00;R$ -#,##0.00" hTextAlign="Center" vTextAlign="Middle">
				<expression><![CDATA[$F{sum}]]></expression>
				<box rightPadding="5"/>
			</element>
		</band>
	</detail>
	<columnFooter/>
	<pageFooter height="20">
		<element kind="line" uuid="d9bdbe90-4ca4-49b6-ae9f-406da94859c5" x="1" y="0" width="554" height="1">
			<pen lineStyle="Dashed"/>
		</element>
		<element kind="textField" uuid="5b1f9286-121a-463d-96f0-f6616002d91e" x="0" y="0" width="200" height="20" evaluationTime="Report" vTextAlign="Bottom">
			<expression><![CDATA["Gerado em: " + new java.text.SimpleDateFormat("dd/MM/yyyy HH:mm").format(new java.util.Date())]]></expression>
		</element>
		<element kind="textField" uuid="11c14bb3-97d9-4a95-843b-d3d73be4ad12" x="455" y="0" width="100" height="20" hTextAlign="Right" vTextAlign="Bottom">
			<expression><![CDATA["Página " + $V{PAGE_NUMBER}]]></expression>
		</element>
	</pageFooter>
	<summary height="82">
		<element kind="staticText" uuid="6fe92ae8-7b15-4abe-8426-4d9dff4a968a" x="335" y="62" width="120" height="20" hTextAlign="Center" vTextAlign="Middle">
			<text><![CDATA[(=) Lucro Líquido:]]></text>
		</element>
		<element kind="textField" uuid="cafde149-9c1e-41f9-8d9d-84eda31d8f6d" x="455" y="62" width="100" height="20" pattern="R$ #,##0.00" vTextAlign="Middle">
			<expression><![CDATA[$P{LUCRO_LIQUIDO}]]></expression>
			<box rightPadding="5"/>
		</element>
		<element kind="staticText" uuid="e54b597c-27ae-491d-af00-fe777351b7c3" x="335" y="30" width="120" height="20" hTextAlign="Center" vTextAlign="Middle">
			<text><![CDATA[(-) Total de Despesas:]]></text>
		</element>
		<element kind="textField" uuid="d498b84b-ba12-4055-ad2f-7af0070a35b9" x="455" y="30" width="100" height="20" pattern="R$ #,##0.00" vTextAlign="Middle">
			<expression><![CDATA[$P{TOTAL_DESPESAS}]]></expression>
			<box rightPadding="5"/>
		</element>
		<element kind="staticText" uuid="ed8716aa-e835-4e26-bb01-9804722b56ae" x="335" y="10" width="120" height="20" hTextAlign="Center" vTextAlign="Middle">
			<text><![CDATA[(=) Lucro Bruto:]]></text>
		</element>
		<element kind="textField" uuid="4911dac4-c8dd-4d10-ae2f-69c9fc8662e1" x="455" y="10" width="100" height="20" pattern="R$ #,##0.00;R$ -#,##0.00" vTextAlign="Middle">
			<expression><![CDATA[$P{LUCRO_BRUTO}]]></expression>
			<box rightPadding="5"/>
		</element>
		<element kind="line" uuid="72cefacf-405a-42cd-bf31-20b808f5c196" x="455" y="55" width="100" height="1"/>
	</summary>
</jasperReport>
